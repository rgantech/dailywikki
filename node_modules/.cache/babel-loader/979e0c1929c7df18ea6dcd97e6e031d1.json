{"ast":null,"code":"import _regeneratorRuntime from\"/data/Rohit Gautam 450/React/React Projects/p/dailywikki/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/data/Rohit Gautam 450/React/React Projects/p/dailywikki/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _marked=/*#__PURE__*/_regeneratorRuntime().mark(fetchDataSaga),_marked2=/*#__PURE__*/_regeneratorRuntime().mark(PopularArticlesSaga);import{call,takeEvery,put}from\"redux-saga/effects\";import Axios from\"axios\";import{fetchData,fetchedData}from\"../../Store\";import{PopularArticlesSagaAction}from\"./PopularArticlesSagaAction\";var callAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var url,method,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=_ref.url,method=_ref.method,data=_ref.data;_context.next=3;return Axios({url:url,method:method,data:data});case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},_callee);}));return function callAPI(_x){return _ref2.apply(this,arguments);};}();export function fetchDataSaga(){var today,month,result;return _regeneratorRuntime().wrap(function fetchDataSaga$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;today=new Date();month=(\"0\"+Math.floor(today.getMonth()+1)).slice(-2);_context2.next=5;return call(function(){return(//callAPI({ url: `https://wikimedia.org/api/rest_v1/metrics/pageviews/top/en.wikipedia/all-access/${today.getFullYear()}/${month}/${Math.floor(today.getDate()-2)}` })\ncallAPI({url:\"https://api.wikimedia.org/feed/v1/wikipedia/en/featured/\".concat(today.getFullYear(),\"/\").concat(month,\"/\").concat(Math.floor(today.getDate()))}));});case 5:result=_context2.sent;_context2.next=8;return put(fetchData(result.data));case 8:_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);_context2.next=14;return put({type:\"TODO_FETCH_FAILED\"});case 14:case\"end\":return _context2.stop();}}},_marked,null,[[0,10]]);}export default function PopularArticlesSaga(){return _regeneratorRuntime().wrap(function PopularArticlesSaga$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return put(fetchedData(true));case 2:_context3.next=4;return takeEvery(\"FETCH_DATA_SAGA\",fetchDataSaga);case 4:case\"end\":return _context3.stop();}}},_marked2);}","map":{"version":3,"names":["fetchDataSaga","PopularArticlesSaga","call","takeEvery","put","Axios","fetchData","fetchedData","PopularArticlesSagaAction","callAPI","url","method","data","today","Date","month","Math","floor","getMonth","slice","getFullYear","getDate","result","type"],"sources":["/data/Rohit Gautam 450/React/React Projects/p/dailywikki/src/Redux/Features/PopularArticles/PopularArticlesSaga.js"],"sourcesContent":["import { call, takeEvery, put } from \"redux-saga/effects\";\nimport Axios from \"axios\";\nimport { fetchData, fetchedData } from \"../../Store\";\nimport { PopularArticlesSagaAction } from \"./PopularArticlesSagaAction\";\n\nlet callAPI = async ({ url, method, data }) => {\n  return await Axios({\n    url,\n    method,\n    data\n  });\n};\n\nexport function* fetchDataSaga() {\n\n  try {\n    const today = new Date();\n    const month = (\"0\" + Math.floor(today.getMonth()+1)).slice(-2) \n    let result = yield call(() =>\n      //callAPI({ url: `https://wikimedia.org/api/rest_v1/metrics/pageviews/top/en.wikipedia/all-access/${today.getFullYear()}/${month}/${Math.floor(today.getDate()-2)}` })\n        callAPI({url: `https://api.wikimedia.org/feed/v1/wikipedia/en/featured/${today.getFullYear()}/${month}/${Math.floor(today.getDate())}`})\n      );\n    yield put(fetchData(result.data));\n  } catch (e) {\n    yield put({ type: \"TODO_FETCH_FAILED\" });\n  }\n}\n\nexport default function* PopularArticlesSaga() {\n  yield put(fetchedData(true));\n  yield takeEvery(\"FETCH_DATA_SAGA\", fetchDataSaga);\n}\n"],"mappings":"gWAaiBA,a,mDAeQC,mB,EA5BzB,OAASC,IAAT,CAAeC,SAAf,CAA0BC,GAA1B,KAAqC,oBAArC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,WAApB,KAAuC,aAAvC,CACA,OAASC,yBAAT,KAA0C,6BAA1C,CAEA,GAAIC,QAAO,6FAAG,6JAASC,GAAT,MAASA,GAAT,CAAcC,MAAd,MAAcA,MAAd,CAAsBC,IAAtB,MAAsBA,IAAtB,uBACCP,MAAK,CAAC,CACjBK,GAAG,CAAHA,GADiB,CAEjBC,MAAM,CAANA,MAFiB,CAGjBC,IAAI,CAAJA,IAHiB,CAAD,CADN,6GAAH,kBAAPH,QAAO,6CAAX,CAQA,MAAO,SAAUT,cAAV,sKAGGa,KAHH,CAGW,GAAIC,KAAJ,EAHX,CAIGC,KAJH,CAIW,CAAC,IAAMC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,QAAN,GAAiB,CAA5B,CAAP,EAAuCC,KAAvC,CAA6C,CAAC,CAA9C,CAJX,kBAKU,MAAMjB,KAAI,CAAC,iBACtB;AACEO,OAAO,CAAC,CAACC,GAAG,mEAA6DG,KAAK,CAACO,WAAN,EAA7D,aAAoFL,KAApF,aAA6FC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACQ,OAAN,EAAX,CAA7F,CAAJ,CAAD,CAFa,GAAD,CAAV,CALV,OAKCC,MALD,iCASH,MAAMlB,IAAG,CAACE,SAAS,CAACgB,MAAM,CAACV,IAAR,CAAV,CAAT,CATG,8GAWH,MAAMR,IAAG,CAAC,CAAEmB,IAAI,CAAE,mBAAR,CAAD,CAAT,CAXG,sEAeP,cAAe,SAAUtB,oBAAV,qJACb,MAAMG,IAAG,CAACG,WAAW,CAAC,IAAD,CAAZ,CAAT,CADa,wBAEb,MAAMJ,UAAS,CAAC,iBAAD,CAAoBH,aAApB,CAAf,CAFa"},"metadata":{},"sourceType":"module"}